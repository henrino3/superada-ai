---
import type { CollectionEntry } from 'astro:content';
import BaseHead from '../components/BaseHead.astro';
import Footer from '../components/Footer.astro';
import FormattedDate from '../components/FormattedDate.astro';
import Header from '../components/Header.astro';

type Props = CollectionEntry<'blog'>['data'];

const { title, description, pubDate, updatedDate, heroImage } = Astro.props;
---

<html lang="en">
  <head>
    <BaseHead title={title} description={description} />
    <style>
      .prose {
        color: #c9bda8;
        line-height: 1.8;
        font-size: 1rem;
      }
      .prose h1, .prose h2, .prose h3, .prose h4 {
        font-family: Georgia, 'Times New Roman', serif;
        font-weight: 400;
        color: #E8DCC8;
        margin-top: 2rem;
        margin-bottom: 0.75rem;
        line-height: 1.3;
      }
      .prose p { margin-bottom: 1.25rem; }
      .prose a { color: #C87533; }
      .prose a:hover { text-decoration: underline; }
      .prose strong { color: #E8DCC8; font-weight: 600; }
      .prose em { font-style: italic; }
      .prose code {
        background: #1e1812;
        border: 1px solid #2A241E;
        border-radius: 3px;
        padding: 0.1em 0.4em;
        font-size: 0.875em;
        color: #d4af7a;
      }
      .prose pre {
        background: #1e1812;
        border: 1px solid #2A241E;
        border-radius: 6px;
        padding: 1.25rem;
        overflow-x: auto;
        margin-bottom: 1.25rem;
      }
      .prose pre code {
        background: none;
        border: none;
        padding: 0;
        color: #c9bda8;
      }
      .prose blockquote {
        border-left: 3px solid #C87533;
        margin-left: 0;
        padding-left: 1.25rem;
        color: #8B7E6A;
        font-style: italic;
      }
      .prose ul, .prose ol {
        padding-left: 1.5rem;
        margin-bottom: 1.25rem;
      }
      .prose li { margin-bottom: 0.4rem; }
      .prose hr {
        border: none;
        border-top: 1px solid #2A241E;
        margin: 2rem 0;
      }
      .prose img {
        border-radius: 6px;
        border: 1px solid #2A241E;
        max-width: 100%;
      }
    </style>
  </head>
  <body style="background:#0D0B09; color:#E8DCC8; min-height:100vh;">
    <Header />
    <main style="max-width:800px; margin:0 auto; padding:3rem 1.5rem;">
      <article>

        <!-- Date & meta -->
        <div style="font-size:0.8125rem; color:#8B7E6A; margin-bottom:1.5rem; font-variant-numeric:tabular-nums;">
          <FormattedDate date={pubDate} />
          {updatedDate && (
            <span style="margin-left:0.75rem;">
              &bull; Updated <FormattedDate date={updatedDate} />
            </span>
          )}
        </div>

        <!-- Title -->
        <h1 style="font-family:Georgia,serif; font-size:2rem; font-weight:400; margin:0 0 0.75rem; line-height:1.25; color:#E8DCC8;">
          {title}
        </h1>

        {description && (
          <p style="font-size:1.0625rem; color:#8B7E6A; margin:0 0 2.5rem; line-height:1.6;">
            {description}
          </p>
        )}

        <!-- Hero image -->
        {heroImage && (
          <div style="margin-bottom:2.5rem;">
            <img src={heroImage.src} alt="" style="width:100%; border-radius:6px; border:1px solid #2A241E;" />
          </div>
        )}

        <hr style="border:none; border-top:1px solid #2A241E; margin-bottom:2.5rem;" />

        <!-- Content -->
        <div class="prose">
          <slot />
        </div>

      </article>

      <!-- Back link -->
      <div style="margin-top:3rem; padding-top:1.5rem; border-top:1px solid #2A241E;">
        <a href="/blog" style="color:#C87533; font-size:0.875rem; text-decoration:none;"
          onmouseover="this.style.textDecoration='underline'" onmouseout="this.style.textDecoration='none'">
          &larr; Back to Ship Log
        </a>
      </div>

    </main>
    <Footer />
  </body>
</html>
